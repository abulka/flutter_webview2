<!DOCTYPE html>
<html>

<head>
    <title>My little js world</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/7.1.0/math.min.js" type="text/javascript"></script>
    
</head>

<body>
    <p>
        This is hopefully loaded from assets.  The functions in here are:
    </p>
    <ul>
        <ul>fred() returns 100</ul>
        <ul>fred_add(a, b)</ul>
        <ul>--</ul>
        <ul>fred_add_via_timeout_which_posts(a, b)</ul>
        <ul>add(a, b)</ul>
    </ul>
    <p>
        The last two functions post to the Toaster channel, 
        thus we can <b>get the result</b> back to Flutter.
    </p>

    <script>
        // console.log('hi andy from my little js world.')

        function fred() {
            return 100
        }


        function fred_add(a, b) {
            return a + b
        }

        // proper way to do it

        function add(a, b) {
            let result = a + b
            Toaster.postMessage(result)
        }

        // totally async

        function fred_add_via_timeout_which_posts(a, b) {
            setTimeout(_fred_add_which_posts, 3000, a, b);
        }

        function _fred_add_which_posts(a, b) {
            let result = a + b
            Toaster.postMessage(result)  // Toaster is the channel
        }

        // mathjs

        function mathjs1(a, b) {
            let result = math.sqrt(-4).toString()
            Toaster.postMessage(result)
        }


        Toaster.postMessage('my little js world loaded and js scripts ran.')
    </script>

</body>

</html>